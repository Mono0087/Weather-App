(()=>{"use strict";const e="d99db5078b9de54907fc002e6b5e179a",t={locationName:void 0,country:void 0,iconURL:void 0,status:void 0,description:void 0,currTemp:void 0,feelsLikeTemp:void 0,humidity:void 0,windSpeed:void 0,days:[]},n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],r={async getForecast(r){const c=await fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r,"&units=metric&appid=").concat(e)),o=await fetch("http://api.openweathermap.org/data/2.5/forecast?q=".concat(r,"&units=metric&appid=").concat(e)),i=await c.json();t.locationName=i.name,t.country=i.sys.country,t.iconURL="https://openweathermap.org/img/wn/".concat(i.weather[0].icon,"@2x.png"),t.status=i.weather[0].main,t.description=i.weather[0].description,t.currTemp=i.main.temp,t.feelsLikeTemp=i.main.feels_like,t.humidity=i.main.humidity,t.windSpeed=i.wind.speed;const d=(e=>{const t=[];let r=e[0].dt_txt.split(" ")[0];const c={};let o=0;return e.forEach((e=>{const[i,d]=e.dt_txt.split(" ");i!==r&&(t[o].eveningTemp||(t[o].eveningTemp=e.main.temp),t[o].dayTemp||(t[o].dayTemp=e.main.temp),t[o].iconURL||(t[o].iconUrl="https://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png")),t[o].description||(t[o].description=e.weather[0].description),o+=1,r=i),c.date="".concat(new Date(r).getDate()," ").concat(a[new Date(r).getMonth()]),c.dayOfWeek=n[new Date(r).getDay()],"09:00:00"===d?(c.dayTemp=e.main.temp,c.iconUrl="https://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),c.description=e.weather[0].description):"21:00:00"===d&&(c.eveningTemp=e.main.temp),t[o]={...c}})),t})((await o.json()).list);return t.days=d,t}},c={convertMeasure(e,t){if("far"===t){const t=1.8*e+32;return"".concat(Math.round(t)," °F")}const n=(e-32)/1.8;return"".concat(Math.round(n)," °C")},async getWeatherProxy(e,t){let n;return"openWeather"===t&&(n=await r.getForecast(e)),n}};function o(e,t,n,a,r,c){const o=document.createElement(e);t&&o.classList.add(...t),n&&(o.id=n),r&&(o.innerText=r),a&&a.forEach((e=>{const t=e.cloneNode(!0);o.appendChild(t)})),c&&c.forEach((e=>{o.dataset[e.dataKey]=e.dataValue}));for(var i=arguments.length,d=new Array(i>6?i-6:0),s=6;s<i;s++)d[s-6]=arguments[s];return d.forEach((e=>{var t;o.setAttribute(e.key,null!==(t=e.value)&&void 0!==t?t:"")})),o}const i=document.querySelector("body"),d=i.querySelector("[data-location-search-input]"),s=i.querySelector("[data-location-name]"),l=i.querySelector("[data-current-temp]"),u=i.querySelector("[data-current-temp-icon-box]"),p=i.querySelector("[data-current-temp-desc]"),m=i.querySelector("[data-current-feels-like-temp]"),h=i.querySelector("[current-wind-speed]"),y=i.querySelector("[data-current-humidity]"),w=i.querySelector("[data-general-info-error]"),g=i.querySelector("[general-info-waiting-screen]"),L=i.querySelector("[data-forecast-container]");let T="C";const v={changeTemperatureMeasure(){const e=i.querySelectorAll("[data-temp]");"C"===T?[...e].forEach((e=>{const t=Number.parseInt(e.innerHTML,10);e.innerHTML=c.convertMeasure(t,"far"),T="F"})):[...e].forEach((e=>{const t=Number.parseInt(e.innerHTML,10);e.innerHTML=c.convertMeasure(t,"cel"),T="C"}))},renderWeather(e){c.getWeatherProxy(e,"openWeather").then((async e=>{(async()=>{w.classList.add("hidden"),w.classList.remove("show"),w.querySelector("p").innerHTML=""})(),await(async()=>(g.classList.remove("hidden"),g.classList.add("show"),new Promise((e=>{setTimeout((()=>{g.classList.add("hidden"),g.classList.remove("show"),e()}),2e3)}))))(),g.addEventListener("animationend",(()=>{var t;t=e,s.innerHTML="".concat(t.locationName," ").concat(t.country),u.innerHTML="<img src='".concat(t.iconURL,"' alt='").concat(t.status,"'>"),l.innerHTML="".concat(Math.round(t.currTemp)," °C"),p.innerHTML=t.description,m.innerHTML="Feels like: <span  data-temp>".concat(Math.round(t.feelsLikeTemp)," °C</span>"),h.innerHTML="Wind speed: ".concat(t.windSpeed," m/s"),y.innerHTML="Humidity: ".concat(t.humidity,"%"),L.innerHTML="",t.days.forEach((e=>{const t=o("h3",null,null,null,e.dayOfWeek),n=o("p",null,null,null,e.date),a=o("img",["dayIcon"]);a.src=e.iconUrl,a.alt=e.description;const r=o("div",["image-box"],null,[a]),c=o("p",["day-temp"],null,null,"".concat(Math.round(e.dayTemp)," °C"),[{dataKey:"temp"}]),i=o("p",["evening-temp"],null,null,"".concat(Math.round(e.eveningTemp)," °C"),[{dataKey:"temp",dataValue:""}]),d=o("p",["day-description"],null,null,e.description),s=o("div",["weather-info"],null,[c,i,d]),l=o("div",["weather-container"],null,[r,s]),u=o("div",["day"],null,[t,n,l]);L.append(u)})),d.innerHTML=""}))})).catch((e=>{console.error(e),w.classList.remove("hidden"),w.classList.add("show"),w.querySelector("p").innerHTML="Something went wrong... Please, check your query or try again later."})).finally((()=>{(async()=>{g.classList.remove("show"),g.classList.add("hidden")})()}))}},M=document.querySelector(".container").querySelector("[data-location-search-form]"),f=document.querySelector("[data-change-measure-btn]");M.addEventListener("submit",(e=>{e.preventDefault();const t=e.target.querySelector("[data-location-search-input]").value;v.renderWeather(t)})),f.addEventListener("click",(e=>{"°F"!==e.target.innerHTML?f.innerHTML="°F":f.innerHTML="°C",v.changeTemperatureMeasure()})),v.renderWeather("pekin")})();